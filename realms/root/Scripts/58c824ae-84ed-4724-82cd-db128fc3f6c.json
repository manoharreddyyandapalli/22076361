{
  "metadata" : {
    "realm" : "/",
    "amsterVersion" : "8.0.2",
    "entityType" : "Scripts",
    "entityId" : "58c824ae-84ed-4724-82cd-db128fc3f6c",
    "pathParams" : { }
  },
  "data" : {
    "_id" : "58c824ae-84ed-4724-82cd-db128fc3f6c",
    "name" : "Normalized Profile to Managed User",
    "description" : "Converts a normalized social profile into a managed user",
    "script" : "LyoKICogQ29weXJpZ2h0IDIwMjAtMjAyMiBGb3JnZVJvY2sgQVMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQKICoKICogVXNlIG9mIHRoaXMgY29kZSByZXF1aXJlcyBhIGNvbW1lcmNpYWwgc29mdHdhcmUgbGljZW5zZSB3aXRoIEZvcmdlUm9jayBBUy4KICogb3Igd2l0aCBvbmUgb2YgaXRzIGFmZmlsaWF0ZXMuIEFsbCB1c2Ugc2hhbGwgYmUgZXhjbHVzaXZlbHkgc3ViamVjdAogKiB0byBzdWNoIGxpY2Vuc2UgYmV0d2VlbiB0aGUgbGljZW5zZWUgYW5kIEZvcmdlUm9jayBBUy4KICovCgppbXBvcnQgc3RhdGljIG9yZy5mb3JnZXJvY2suanNvbi5Kc29uVmFsdWUuZmllbGQKaW1wb3J0IHN0YXRpYyBvcmcuZm9yZ2Vyb2NrLmpzb24uSnNvblZhbHVlLmpzb24KaW1wb3J0IHN0YXRpYyBvcmcuZm9yZ2Vyb2NrLmpzb24uSnNvblZhbHVlLm9iamVjdAoKaW1wb3J0IG9yZy5mb3JnZXJvY2suanNvbi5Kc29uVmFsdWUKCkpzb25WYWx1ZSBtYW5hZ2VkVXNlciA9IGpzb24ob2JqZWN0KAogICAgICAgIGZpZWxkKCJnaXZlbk5hbWUiLCBub3JtYWxpemVkUHJvZmlsZS5naXZlbk5hbWUpLAogICAgICAgIGZpZWxkKCJzbiIsIG5vcm1hbGl6ZWRQcm9maWxlLmZhbWlseU5hbWUpLAogICAgICAgIGZpZWxkKCJtYWlsIiwgbm9ybWFsaXplZFByb2ZpbGUuZW1haWwpLAogICAgICAgIGZpZWxkKCJ1c2VyTmFtZSIsIG5vcm1hbGl6ZWRQcm9maWxlLnVzZXJuYW1lKSkpCgppZiAobm9ybWFsaXplZFByb2ZpbGUucG9zdGFsQWRkcmVzcy5pc05vdE51bGwoKSkgbWFuYWdlZFVzZXIucHV0KCJwb3N0YWxBZGRyZXNzIiwgbm9ybWFsaXplZFByb2ZpbGUucG9zdGFsQWRkcmVzcykKaWYgKG5vcm1hbGl6ZWRQcm9maWxlLmFkZHJlc3NMb2NhbGl0eS5pc05vdE51bGwoKSkgbWFuYWdlZFVzZXIucHV0KCJjaXR5Iiwgbm9ybWFsaXplZFByb2ZpbGUuYWRkcmVzc0xvY2FsaXR5KQppZiAobm9ybWFsaXplZFByb2ZpbGUuYWRkcmVzc1JlZ2lvbi5pc05vdE51bGwoKSkgbWFuYWdlZFVzZXIucHV0KCJzdGF0ZVByb3ZpbmNlIiwgbm9ybWFsaXplZFByb2ZpbGUuYWRkcmVzc1JlZ2lvbikKaWYgKG5vcm1hbGl6ZWRQcm9maWxlLnBvc3RhbENvZGUuaXNOb3ROdWxsKCkpIG1hbmFnZWRVc2VyLnB1dCgicG9zdGFsQ29kZSIsIG5vcm1hbGl6ZWRQcm9maWxlLnBvc3RhbENvZGUpCmlmIChub3JtYWxpemVkUHJvZmlsZS5jb3VudHJ5LmlzTm90TnVsbCgpKSBtYW5hZ2VkVXNlci5wdXQoImNvdW50cnkiLCBub3JtYWxpemVkUHJvZmlsZS5jb3VudHJ5KQppZiAobm9ybWFsaXplZFByb2ZpbGUucGhvbmUuaXNOb3ROdWxsKCkpIG1hbmFnZWRVc2VyLnB1dCgidGVsZXBob25lTnVtYmVyIiwgbm9ybWFsaXplZFByb2ZpbGUucGhvbmUpCgovLyBpZiB0aGUgZ2l2ZW5OYW1lIGFuZCBmYW1pbHlOYW1lIGlzIG51bGwgb3IgZW1wdHkKLy8gdGhlbiBhZGQgYSBib29sZWFuIGZsYWcgdG8gdGhlIHNoYXJlZCBzdGF0ZSB0byBpbmRpY2F0ZSBuYW1lcyBhcmUgbm90IHByZXNlbnQKLy8gdGhpcyBjb3VsZCBiZSB1c2VkIGVsc2V3aGVyZQovLyBmb3IgZWcuIHRoaXMgY291bGQgYmUgdXNlZCBpbiBhIHNjcmlwdGVkIGRlY2lzaW9uIG5vZGUgdG8gYnktcGFzcyBwYXRjaGluZwovLyB0aGUgdXNlciBvYmplY3Qgd2l0aCBibGFuayB2YWx1ZXMgd2hlbiBnaXZlbk5hbWUgIGFuZCBmYW1pbHlOYW1lIGlzIG5vdCBwcmVzZW50CmJvb2xlYW4gbm9HaXZlbk5hbWUgPSBub3JtYWxpemVkUHJvZmlsZS5naXZlbk5hbWUuaXNOdWxsKCkgfHwgKCFub3JtYWxpemVkUHJvZmlsZS5naXZlbk5hbWUuYXNTdHJpbmcoKT8udHJpbSgpKQpib29sZWFuIG5vRmFtaWx5TmFtZSA9IG5vcm1hbGl6ZWRQcm9maWxlLmZhbWlseU5hbWUuaXNOdWxsKCkgfHwgKCFub3JtYWxpemVkUHJvZmlsZS5mYW1pbHlOYW1lLmFzU3RyaW5nKCk/LnRyaW0oKSkKc2hhcmVkU3RhdGUucHV0KCJuYW1lRW1wdHlPck51bGwiLCBub0dpdmVuTmFtZSAmJiBub0ZhbWlseU5hbWUpCgoKcmV0dXJuIG1hbmFnZWRVc2Vy",
    "default" : true,
    "language" : "GROOVY",
    "context" : "SOCIAL_IDP_PROFILE_TRANSFORMATION",
    "createdBy" : "id=dsameuser,ou=user,dc=openam,dc=forgerock,dc=org",
    "creationDate" : 1433147666269,
    "lastModifiedBy" : "id=dsameuser,ou=user,dc=openam,dc=forgerock,dc=org",
    "lastModifiedDate" : 1433147666269
  }
}